<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Forever Love ‚ù§Ô∏è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --primary: #ff4d6d; --secondary: #ff85a1; }
        body { margin: 0; background: #0a0a0a; color: #fff; font-family: 'Quicksand', sans-serif; overflow-x: hidden; }
        
        /* Background layer */
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
        
        .glass-card {
            background: rgba(20, 20, 20, 0.85);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            display: none;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
        }
        
        .glass-card.active { display: block; }
        .handwritten { font-family: 'Dancing Script', cursive; color: var(--secondary); }
        
        .btn-love {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white; padding: 14px 40px; border-radius: 100px;
            font-weight: bold; text-transform: uppercase; cursor: pointer; border: none;
            box-shadow: 0 10px 20px -5px rgba(255, 77, 109, 0.5);
            transition: all 0.3s ease;
        }
        .btn-love:hover { transform: scale(1.05); filter: brightness(1.1); }

        #rabbit-gift {
            position: fixed; bottom: -400px; left: 50%;
            transform: translateX(-50%); z-index: 100;
            transition: all 1.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            width: 220px; text-align: center;
        }

        input {
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--secondary);
            color: white; padding: 12px; border-radius: 15px; text-align: center; outline: none;
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop>
    <source src="edsherran.mp3" type="audio/mpeg">
</audio>

    <div id="canvas-container"></div>

    <div id="app" class="flex items-center justify-center min-h-screen relative z-10 p-6">
        
        <div class="step glass-card active p-8 max-w-sm w-full text-center" id="step0">
            <div class="text-5xl mb-6">üîê</div>
            <h2 class="text-white text-xl font-bold mb-6">Nh·∫≠p m·∫≠t m√£ ƒë·ªÉ m·ªü qu√†...</h2>
            <input type="password" id="passInput" placeholder="8 con s·ªë n√®..." class="w-full mb-4 focus:ring-2 ring-pink-400">
            <p id="error-msg" class="text-red-400 text-sm hidden mb-4">Sai r·ªìi nha, th·ª≠ l·∫°i ƒëi b√© iu! üå∏</p>
            <button class="btn-love w-full" id="btn-unlock">X√°c nh·∫≠n ‚ù§Ô∏è</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step1">
            <div class="handwritten text-5xl mb-6">Ch√†o c√¥ng ch√∫a...</div>
            <p class="text-gray-300 text-lg mb-8">H√¥m nay l√† m·ªôt ng√†y c·ª±c k·ª≥ ƒë·∫∑c bi·ªát, anh c√≥ ƒëi·ªÅu n√†y mu·ªën n√≥i v·ªõi em.</p>
            <button class="btn-love" id="btn-1">Xem ƒë√≥ l√† g√¨ nh√© ‚ù§Ô∏è</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step2">
            <h2 class="text-4xl font-bold text-white mb-6">Happy Birthday! üéÇ</h2>
            <p class="text-pink-300 text-xl font-medium mb-4">C√¥ g√°i 12/01/2006</p>
            <p class="text-gray-400 mb-8 italic">"C·∫£m ∆°n em v√¨ ƒë√£ l√† m·ªôt ph·∫ßn tuy·ªát v·ªùi nh·∫•t trong cu·ªôc ƒë·ªùi anh."</p>
            <button class="btn-love" id="btn-2">Ti·∫øp t·ª•c ‚ú®</button>
        </div>

        <div class="step glass-card p-8 max-w-2xl w-full text-center" id="step3">
            <h2 class="text-3xl font-bold mb-8 text-pink-400">V√¨ sao em tuy·ªát v·ªùi?</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors">
                    <div class="text-3xl mb-2">‚ú®</div>
                    <h3 class="text-lg font-bold">S·ª± t·ª≠ t·∫ø</h3>
                    <p class="text-xs text-gray-400">Tr√°i tim ·∫•m √°p c·ªßa em lu√¥n khi·∫øn anh t·ª± h√†o.</p>
                </div>
                <div class="p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors">
                    <div class="text-3xl mb-2">üòä</div>
                    <h3 class="text-lg font-bold">N·ª• c∆∞·ªùi</h3>
                    <p class="text-xs text-gray-400">N·ª• c∆∞·ªùi t·ªèa n·∫Øng gi√∫p anh xua tan m·ªçi m·ªát m·ªèi.</p>
                </div>
                <div class="p-4 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors">
                    <div class="text-3xl mb-2">üåü</div>
                    <h3 class="text-lg font-bold">NƒÉng l∆∞·ª£ng</h3>
                    <p class="text-xs text-gray-400">S·ª± nhi·ªát huy·∫øt c·ªßa em truy·ªÅn c·∫£m h·ª©ng cho anh.</p>
                </div>
            </div>
            <button class="btn-love" id="btn-3">M·ªôt ƒëi·ªÅu cu·ªëi c√πng...</button>
        </div>

        <div class="step glass-card p-10 max-w-md w-full text-center" id="step4">
            <div class="handwritten text-4xl mb-6">G·ª≠i em...</div>
            <div id="typing-text" class="text-white text-xl leading-relaxed min-h-[100px]"></div>
            <button class="btn-love mt-8" id="final-btn" style="display: none;">Nh·∫≠n qu√† n√®! ‚ù§Ô∏è</button>
        </div>

        <div id="rabbit-gift">
            <img src="https://media.giphy.com/media/VeMhxrpfpux7cKyQ4g/giphy.gif" 
                 alt="Cute Bunny" class="mx-auto w-40 drop-shadow-2xl">
            <div class="bg-white text-pink-500 font-bold py-2 px-6 rounded-full shadow-2xl mt-4 inline-block border-2 border-pink-100">
                Chocolate cho baby! üç´
            </div>
        </div>
    </div>

    <script>
        // --- 1. Background Animation (Three.js) ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        const heartShape = new THREE.Shape();
        heartShape.moveTo(0, 0);
        heartShape.bezierCurveTo(0, 0, -1, 1, -2, 1);
        heartShape.bezierCurveTo(-4, 1, -4, -1.5, -4, -1.5);
        heartShape.bezierCurveTo(-4, -3, -2, -5, 0, -7);
        heartShape.bezierCurveTo(2, -5, 4, -3, 4, -1.5);
        heartShape.bezierCurveTo(4, -1.5, 4, 1, 2, 1);
        heartShape.bezierCurveTo(1, 1, 0, 0, 0, 0);

        const hearts = [];
        const geometry = new THREE.ShapeGeometry(heartShape);
        const material = new THREE.MeshBasicMaterial({ color: 0xff4d6d, transparent: true, opacity: 0.2 });

        for(let i=0; i<35; i++) {
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.set(Math.random()*100-50, Math.random()*100-50, Math.random()*50-25);
            mesh.rotation.z = Math.PI;
            mesh.scale.set(0.5, 0.5, 0.5);
            scene.add(mesh);
            hearts.push(mesh);
        }
        camera.position.z = 40;

        function animate() {
            requestAnimationFrame(animate);
            hearts.forEach(h => {
                h.position.y += 0.08;
                if(h.position.y > 40) h.position.y = -40;
            });
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- 2. Logic Control ---
        function showStep(currentId, nextId) {
            const curr = document.getElementById(currentId);
            const next = document.getElementById(nextId);
            
            gsap.to(curr, { opacity: 0, y: -20, duration: 0.4, onComplete: () => {
                curr.classList.remove('active');
                next.classList.add('active');
                gsap.fromTo(next, { opacity: 0, y: 20 }, { opacity: 1, y: 0, duration: 0.6 });
            }});
        }

        document.getElementById('btn-unlock').onclick = () => {
            const input = document.getElementById('passInput').value;
            if(input === "12012006") {
                showStep('step0', 'step1');
            } else {
                document.getElementById('error-msg').classList.remove('hidden');
                gsap.fromTo("#step0", { x: -10 }, { x: 10, duration: 0.1, repeat: 5, yoyo: true });
            }
        };

        document.getElementById('btn-1').onclick = () => {
            const music = document.getElementById('bgMusic');
            music.play().catch(e => console.log("Music blocked by browser"));
            showStep('step1', 'step2');
        };
        document.getElementById('btn-2').onclick = () => showStep('step2', 'step3');
        document.getElementById('btn-3').onclick = () => {
            showStep('step3', 'step4');
            startTyping();
        };

        function startTyping() {
            const msgs = ["Ch√∫c m·ª´ng sinh nh·∫≠t em! ‚ù§Ô∏è", "C·∫£m ∆°n em v√¨ ƒë√£ ƒë·∫øn b√™n anh...", "Anh s·∫Ω lu√¥n y√™u th∆∞∆°ng v√† b·∫£o v·ªá em."];
            let l = 0, c = 0;
            const t = document.getElementById('typing-text');
            function type() {
                if(l < msgs.length) {
                    if(c < msgs[l].length) {
                        t.innerHTML += msgs[l].charAt(c);
                        c++;
                        setTimeout(type, 60);
                    } else {
                        t.innerHTML += "<br>";
                        l++;
                        c = 0;
                        setTimeout(type, 700);
                    }
                } else {
                    gsap.fromTo("#final-btn", { display: 'inline-block', opacity: 0 }, { opacity: 1, duration: 0.5 });
                }
            }
            type();
        }

        document.getElementById('final-btn').onclick = function() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#ff4d6d', '#ff85a1', '#ffffff']
            });
            document.getElementById('rabbit-gift').style.bottom = "15%";
            this.innerText = "Y√äU EM R·∫§T NHI·ªÄU! ‚ù§Ô∏è";
            gsap.to(this, { scale: 1.1, repeat: -1, yoyo: true });
        };
    </script>
</body>
</html>
